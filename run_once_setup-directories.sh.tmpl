#!/usr/bin/env bash

set -euo pipefail

# Setup common directory structure
# This script runs once during initial setup

if command -v gum &>/dev/null; then
  gum style --foreground 213 --bold "➜ Setting up directory structure"
else
  echo "Setting up directory structure..."
fi

# Create common directories
mkdir -p ~/.local/bin
mkdir -p ~/.local/share
mkdir -p ~/.config
mkdir -p ~/Projects
mkdir -p ~/Scripts

# Ensure ~/.local/bin is in PATH (will be handled by shell configurations)
if command -v gum &>/dev/null; then
  gum style --foreground 82 "✓ Directory structure created"
else
  echo "Directory structure created successfully"
fi

# Set up basic Git configuration if not present
if command -v git &>/dev/null && ! git config --get user.name &>/dev/null; then
    if command -v gum &>/dev/null; then
      gum style --foreground 245 "Setting up basic Git configuration"
    else
      echo "Setting up basic Git configuration..."
    fi
    git config --global init.defaultBranch main
    git config --global pull.rebase false
    git config --global core.autocrlf input
    if command -v gum &>/dev/null; then
      gum style --foreground 82 "✓ Basic Git configuration complete"
    else
      echo "Basic Git configuration complete"
    fi
fi
